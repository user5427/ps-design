# Development Dockerfile for Backend
FROM node:22-alpine

WORKDIR /app

# Copy backend package files
COPY backend/package*.json backend/tsconfig.json ./backend/

# Copy schemas package files
COPY schemas/package*.json schemas/tsconfig.json ./schemas/

# Install dependencies
RUN cd backend && npm ci

# Copy backend source code
COPY backend/src ./backend/src

# Copy schemas source code
COPY schemas/src ./schemas/src

# Expose port
EXPOSE 4000

# Run development server with hot reload
CMD ["npm", "--prefix", "./backend", "run", "dev"]
