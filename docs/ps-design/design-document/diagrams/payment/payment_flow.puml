@startuml
!theme plain
actor Customer
participant "POS System" as POS
participant "Backend Server" as Server
participant "Stripe API" as Stripe

== Payment Start ==
Customer -> POS : Choose payment method (card / cash / gift card)
POS -> Server : Create payment session

== Card Payment ==
Server -> Stripe : Request payment intent
Stripe -> Server : Return intent reference
POS -> Customer : Request card details
Customer -> Stripe : Enter card details
Stripe -> Server : Send payment result
Server -> POS : Update payment status

== Cash / Gift Card ==
Customer -> POS : Provide cash or gift card
POS -> Server : Record payment

== Tip ==
Customer -> POS : Add tip
POS -> Server : Add tip to payment session

== Finalization ==
Server -> Server : Generate receipt
Server -> POS : Provide receipt
POS -> Customer : Show / print receipt

== Refund (optional) ==
POS -> Server : Request refund
Server -> Stripe : Process refund (if card)
Stripe -> Server : Return refund result
Server -> POS : Update refund status
@enduml
